
Обновление Windows 11 убивает SSD и HDD — как спасти диски от фатального сбоя

Критическая ошибка в обновлении KB5063878 для Windows 11 24H2 (сборка 26100.1882) может безвозвратно повредить ваши SSD и HDD. Инженеры Microsoft подтвердили проблему после лавины жалоб: при записи более 50 ГБ данных на диск, заполненный на 60% и более, система полностью теряет доступ к накопителю. Windows перестаёт его распознавать, а восстановление данных становится невозможным даже в специализированных сервисах.

При этом новая неисправность затрагивает больше моделей накопителей. В частности, известно, что особенно уязвимы NVMe SSD на контроллерах Phison без DRAM-буфера (DRAM-less): они «сдаются» (теряют связь с системой) при сравнительно меньших объёмах записи, чем похожие диски с DRAM. Некоторые корпоративные HDD также под нагрузкой показывали аналогичную «пропажу» и временную потерю SMART-статуса.

• Резервное копирование данных: прежде чем предпринимать какие-либо действия, сохраните (скопируйте) важные файлы на другой носитель. Известно, что обновление прошивки диска или сам сбой может привести к полной потере данных, поэтому резервная копия — единственная гарантия сохранности информации.
• Обновление прошивки SSD: если у вас накопитель Western Digital или SanDisk (например, SN770, SN580 2 ТБ и пр.), обязательно проверьте на сайте производителя наличие обновления микропрограммы. Western Digital выпустила исправления, устраняющие сбои с HMB в Windows 11, версия 24H2, и настоятельно рекомендует установить новую прошивку через универсальную утилиту SanDisk SSD Dashboard. Учтите, что обновление может занять несколько минут и потенциально приводить к потере данных при сбое, поэтому необходима резервная копия. После прошивки стабильность SSD должна вернуться.
• Проверка драйверов и настроек материнской платы: некоторые пользователи заметили, что после установки Windows 11 версии 24H2 один из накопителей мог неправильно определяться системой (например, как IDE/ATA-контроллер). Проверьте в «Диспетчере устройств», какой драйвер используется для NVMe-накопителя. Если это не «Standard NVMe Controller», удалите «битый» драйвер и перезагрузитесь — Windows переустановит корректный драйвер контроллера. Также убедитесь, что в BIOS материнской платы слот M.2 настроен в режим PCIe x4 (а не AUTO/Share), особенно на платах Asus, Gigabyte и др.
• Откат или отложенная установка обновления: по сообщениям, отказ от версии 24H2 позволял вернуть работоспособность накопителей. Если проблемы критичны, рассмотрите временный переход на Windows 11 версии 23H2 (поддержка завершится в ноябре). Можно отключить автоматические обновления до версии 24H2 до появления патча по следующей инструкции.

Симптомы «смерти» диска
• Накопитель исчезает из «Проводника» и «Управления дисками»;
• В BIOS/UEFI диск отображается как «Unknown Device» или не определяется вовсе;
• При подключении к другому ПК — та же картина;
• Возможен синий экран (BSOD) с ошибкой CRITICAL_STRUCTURE_CORRUPTION перед полным отказом.

Почему нельзя восстановить данные?
На SSD сбой контроллера блокирует доступ к чипам памяти на аппаратном уровне. На HDD повреждается служебная зона диска (аналог BIOS для жёсткого диска), где хранится карта секторов и ключи дешифровки. Ремонт требует замены контроллера и дорогостоящего оборудования, доступного только в лабораториях.

Немедленно удалите обновление KB5063878
• Нажмите Win + R > введите appwiz.cpl > Enter.
• Выберите «Просмотр установленных обновлений» в левом меню.
• Найдите KB5063878 > щелкните правой кнопкой > Удалить.
• Перезагрузите ПК.

Запретите автоматическую переустановку KB5063878
• Скачайте Microsoft Show or Hide Updates Tool с официального сайта.
• Запустите инструмент > выберите «Скрыть обновления» > отметьте KB5063878.

Экстренная защита данных
• Не записывайте на диск файлы > 10 ГБ!
• Освободите место — удалите временные файлы или перенесите данные на внешний диск, чтобы свободно было > 50%.
• Отключите дефрагментацию для SSD (она не нужна и может спровоцировать сбой): Откройте «Оптимизация дисков» > выберите SSD > «Изменить параметры» > снимите галочку «Выполнять по расписанию».

Когда ждать исправление?
Microsoft признала проблему, но патч выйдет не раньше сентября 2025. До тех пор единственная защита — удаление KB5063878 и запрет его установки.

Если на компьютере уже установлено некорректного обновление, вызывающее проблему, его можно удалить через Settings -> Windows Update -> View Update History -> Uninstall updates. Щелкните по обновлению в списке и выберите Uninstall.

Либо можно удалить обновление из командной строки. Выведите обновления, отсортированные по дате установки с помощью PowerShell команды.
• Get-HotFix | Sort-Object -Property InstalledOn -Descending

Найдите номер вашего обновления в списке (KBxxxxx) и удалите его по KB ID:
• wusa /uninstall /kb:5048161

Однако удаленное обновление через некоторое время будет автоматически пытаться установится повторно (можно переопределить параметры автоустановки через групповые политики Windows Update).
Чтобы полностью заблокировать (скрыть) определенное обновление от службы Windows Update, можно воспользоваться официальной утилитой от Microsoft Show or hide updates ( wushowhide.diagcab ).

• Скачайте утилиту Show or hide updates с сайта Microsoft
https://download.microsoft.com/download/f/2/2/f22d5fdb-59cd-4275-8c95-1be17bf70b21/wushowhide.diagcab
• Запустите утилиту wushowhide.diagcab
• Выберите пункт Hide updates
• Выберите в списке обновление, которое нужно скрыть
• Чтобы сделать обновление доступным к установке, нужно в утилите wushowhide.diagcab выбрать Show hidden updates и отменить скрытие обновления.


Приостановка обновлений в Windows

В Windows 10 и 11 пользователи могут полностью приостановить установку любых обновлений Windows на срок до 35 дней. Это способ обычно используется, когда в вышедшем обновлении обнаружен баг и вы хотите дождаться исправления.

Чтобы отложить установку обновлений на срок 7 дней, нужно нажать кнопку Pause updates for 7 more days в панели Settings -> Windows Updates. Можно поставить обновления на паузу 5 раз по 7 дней (итого на 35 дней). Скорее всего этого времени будет достаточно, чтобы инженеры Microsoft подтвердили наличие массовой проблемы в обновление и исправили или отозвали его.

С помощью PowerShell можно проверить до какой даты отложена установка обновлений:

• Get-ItemProperty -Path 'HKLM:\SOFTWARE\Microsoft\WindowsUpdate\UX\Settings'| Select-Object PauseUpdatesExpiryTime

Либо можно поставить установку обновлений на паузу с помощью скрипта:

$pause = (Get-Date).AddDays(35)
$pause = $pause.ToUniversalTime().ToString("yyyy-MM-ddTHH:mm:ssZ")
Set-ItemProperty -Path 'HKLM:\SOFTWARE\Microsoft\WindowsUpdate\UX\Settings' -Name 'PauseUpdatesExpiryTime' -Value $pause

Это увеличит срок приостановки обновлений на максимальный срок 35 дней.

Заблокировать установку обновления с помощью PowerShell

Чтобы заблокировать установку определенного обновления в Windows можно использовать PowerShell командлеты из модуля PSWindowsUpdate. Установите модуль на компьютере, если он еще не установлен:

Install-Module -Name PSWindowsUpdate

Перезапустите консоль PowerShell и разрешите запуск командлетов модуля в текущей сессии (чтобы не менять глобальные настройки PowerShell Execution Policy):

Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope Process

Выведите список обновлений, доступных для установки:

Get-WindowsUpdate

Чтобы скрыть конкретное обновлений, укажите его номер (KB) в следующей команде:

Hide-WindowsUpdate -KBArticleID KB5048652 -Verbose

Скрытые обновления не будут отображаться в списке доступных при сканировании обновлений с помощью команды Get-WindowsUpdate. Чтобы вывести скрытые обновления выполните:

Get-WindowsUpdate –IsHidden

Скрытые обновлений в столбце Status имеют атрибут H ( Hidden ).

Чтобы отменить скрытие обновлений и разрешить его установку, выполните:

Show-WindowsUpdate -KBArticleID KB5048652

Довольно часто пользователям нужно заблокировать установку обновлений для драйвера какого-либо устройства (чтобы Windows не обновляла этот драйвер автоматически). Однако при выводе списка доступных обновлений через Get-WindowsUpdate вы обнаружите, что у обновлений драйверов в Windows Update отсутствует номер KB. В этом случае скрыть обновление драйвера можно по его ID:

$Updates = Get-WindowsUpdate -WindowsUpdate -UpdateType Driver
$Updates | Select Title,Description -Expand Identity

Скопируйте ID обновлений из результатов и скройте обновлений драйвера по его ID:

Hide-WindowsUpdate -UpdateID "3f6ba9a7-b031-4990-808f-69a9e1ef6a91"












Удаление через командную строку
1. Выведите список установленных обновлений с помощью PowerShell:


Get-HotFix | Sort-Object -Property InstalledOn -Descending

Команда отобразит номера обновлений (KB) и даты установки.

2. Удалите обновление, указав его номер KB:

wusa /uninstall /kb:5053598

3. Подтвердите удаление в появившемся окне.

Удаленное обновление может автоматически установиться снова, если не заблокировать его установку.



Групповые политики: Для полного контроля над обновлениями настройте параметры Windows Update через Групповые политики:

– Откройте gpedit.msc.

– Перейдите в Конфигурация компьютера > Административные шаблоны > Компоненты Windows > Центр обновления Windows.

– Настройте Не включать драйверы в обновления Windows или Настройка автоматического обновления.

Мониторинг журналов: Проверяйте Журнал событий (журнал Setup) для анализа ошибок или подтверждения успешного скрытия обновлений.

Ограничения: Скрытие обновлений не влияет на уже установленные обновления. Для их удаления используйте методы, описанные в начале статьи.












